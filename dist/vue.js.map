{"version":3,"file":"vue.js","sources":["../src/util/index.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isObject(object) {\r\n   return typeof object === 'object' && object !== null;\r\n}","import { isObject } from '../util/index.js';\r\n\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    this.walk(data);\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data);\r\n    for (let i = 0; i < keys.length; i++) {\r\n      let key = keys[i],\r\n        val = data[key];\r\n      defineReactive(data, key, val);\r\n    }\r\n  }\r\n}\r\n\r\n// 对data的每个属性都进行响应式设计\r\nfunction defineReactive(data, key, val) {\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return val;\r\n    },\r\n    set(newVal) {// 依赖收集\r\n      if (newVal == val) return;\r\n      console.log('属性值发生变化了');\r\n      val = newVal;\r\n    }\r\n  })\r\n}\r\n\r\n// 导出一个监听函数，用来监听data对象的属性变化。\r\n// 使用了defineProperty，此方法不兼容ie8及其以下版本，所以vue2不兼容ie8。\r\nexport function observer(data) {\r\n  console.log(isObject(data))\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  // 创建一个类进行数据劫持。\r\n  new Observer(data);\r\n}","import {observer} from './observer/index.js';\r\n\r\n// 初始化状态js\r\nexport function initState(vm){\r\n    const opts = vm.$options;\r\n    if(opts.props){\r\n        initProps(vm);\r\n    }\r\n    if(opts.data){\r\n        initData(vm);\r\n    }\r\n    if(opts.methods){\r\n        initMethods(vm);\r\n    }\r\n    if(opts.computed){\r\n        initComputed(vm);\r\n    }\r\n    if(opts.watch){\r\n        initWatch(vm);\r\n    }\r\n}\r\n\r\nfunction initProps(vm){};\r\nfunction initData(vm){\r\n    let data = vm.$options.data;\r\n    vm._data = data = typeof data === 'function'?data.call(vm):data;\r\n    // 监听data的变化来实时影响视图 ==> 数据影响视图。\r\n    observer(data);\r\n};\r\nfunction initMethods(vm){};\r\nfunction initComputed(vm){};\r\nfunction initWatch(vm){};","// 初始化js\r\nimport {initState} from './state';\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype.init = function(option){\r\n        let vm = this;\r\n        vm.$options = option;\r\n\r\n        // 初始化实例状态\r\n        initState(vm);\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n *  实例初始化\r\n *      初始化状态 initState(vm)\r\n * \r\n */","import {initMixin} from './init.js';\r\n\r\n\r\nfunction Vue(option){\r\n    this.init(option);\r\n}\r\n\r\ninitMixin(Vue);\r\n\r\n\r\n\r\nexport default Vue;"],"names":["isObject","object","Observer","constructor","data","walk","keys","Object","i","length","key","val","defineReactive","defineProperty","get","set","newVal","console","log","observer","initState","vm","opts","$options","props","initData","methods","computed","watch","_data","call","initMixin","Vue","prototype","init","option"],"mappings":";;;;;;GAAO,SAASA,QAAT,CAAkBC,MAAlB,EAA0B;GAC9B,SAAO,OAAOA,MAAP,KAAkB,QAAlB,IAA8BA,MAAM,KAAK,IAAhD;GACF;;GCCD,MAAMC,QAAN,CAAe;GACbC,EAAAA,WAAW,CAACC,IAAD,EAAO;GAChB,SAAKC,IAAL,CAAUD,IAAV;GACD;;GACDC,EAAAA,IAAI,CAACD,IAAD,EAAO;GACT,QAAIE,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYF,IAAZ,CAAX;;GACA,SAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;GACpC,UAAIE,GAAG,GAAGJ,IAAI,CAACE,CAAD,CAAd;GAAA,UACEG,GAAG,GAAGP,IAAI,CAACM,GAAD,CADZ;GAEAE,MAAAA,cAAc,CAACR,IAAD,EAAOM,GAAP,EAAYC,GAAZ,CAAd;GACD;GACF;;GAXY;;;GAef,SAASC,cAAT,CAAwBR,IAAxB,EAA8BM,GAA9B,EAAmCC,GAAnC,EAAwC;GACtCJ,EAAAA,MAAM,CAACM,cAAP,CAAsBT,IAAtB,EAA4BM,GAA5B,EAAiC;GAC/BI,IAAAA,GAAG,GAAG;GACJ,aAAOH,GAAP;GACD,KAH8B;;GAI/BI,IAAAA,GAAG,CAACC,MAAD,EAAS;GAAC;GACX,UAAIA,MAAM,IAAIL,GAAd,EAAmB;GACnBM,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;GACAP,MAAAA,GAAG,GAAGK,MAAN;GACD;;GAR8B,GAAjC;GAUD;GAGD;;;GACO,SAASG,QAAT,CAAkBf,IAAlB,EAAwB;GAC7Ba,EAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAQ,CAACI,IAAD,CAApB;;GACA,MAAI,CAACJ,QAAQ,CAACI,IAAD,CAAb,EAAqB;GACnB;GACD,GAJ4B;;;GAM7B,MAAIF,QAAJ,CAAaE,IAAb;GACD;;GCrCM,SAASgB,SAAT,CAAmBC,EAAnB,EAAsB;GACzB,QAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;GACA,MAAGD,IAAI,CAACE,KAAR,EAAc;;GAGd,MAAGF,IAAI,CAAClB,IAAR,EAAa;GACTqB,IAAAA,QAAQ,CAACJ,EAAD,CAAR;GACH;;GACD,MAAGC,IAAI,CAACI,OAAR,EAAgB;;GAGhB,MAAGJ,IAAI,CAACK,QAAR,EAAiB;;GAGjB,MAAGL,IAAI,CAACM,KAAR,EAAc;GAGjB;;GAGD,SAASH,QAAT,CAAkBJ,EAAlB,EAAqB;GACjB,MAAIjB,IAAI,GAAGiB,EAAE,CAACE,QAAH,CAAYnB,IAAvB;GACAiB,EAAAA,EAAE,CAACQ,KAAH,GAAWzB,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA2BA,IAAI,CAAC0B,IAAL,CAAUT,EAAV,CAA3B,GAAyCjB,IAA3D,CAFiB;;GAIjBe,EAAAA,QAAQ,CAACf,IAAD,CAAR;GACH;;GC5BD;GAGO,SAAS2B,SAAT,CAAmBC,GAAnB,EAAuB;GAC1BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,IAAd,GAAqB,UAASC,MAAT,EAAgB;GACjC,QAAId,EAAE,GAAG,IAAT;GACAA,IAAAA,EAAE,CAACE,QAAH,GAAcY,MAAd,CAFiC;;GAKjCf,IAAAA,SAAS,CAACC,EAAD,CAAT;GACH,GAND;GAOH;GAKD;GACA;GACA;GACA;GACA;;GCjBA,SAASW,GAAT,CAAaG,MAAb,EAAoB;GAChB,OAAKD,IAAL,CAAUC,MAAV;GACH;;GAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}